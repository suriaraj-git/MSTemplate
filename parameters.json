{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "hciArtifactsLocation": {
            "value": "https://wvdportalstorageblob.blob.core.windows.net/galleryartifacts/HCIScripts_1.0.02599.267/HciCustomScript.ps1"
        },
        "customLocationId": {
            "value": ""
        },
        "virtualProcessorCount": {
            "value": null
        },
        "memoryMB": {
            "value": 0
        },
        "maximumMemoryMB": {
            "value": 0
        },
        "minimumMemoryMB": {
            "value": 0
        },
        "dynamicMemoryConfig": {
            "value": false
        },
        "vmInfrastructureType": {
            "value": "Cloud"
        },
        "artifactsLocation": {
            "value": "https://wvdportalstorageblob.blob.core.windows.net/galleryartifacts/Configuration_1.0.02599.267.zip"
        },
        "nestedTemplatesLocation": {
            "value": "https://wvdportalstorageblob.blob.core.windows.net/galleryartifacts/armtemplates/Hostpool_1.0.02599.267/nestedTemplates/"
        },
        "hostpoolName": {
            "value": "AlphapilotTest"
        },
        "hostpoolProperties": {
            "value": {
                "agentUpdate": {
                    "type": "Scheduled",
                    "useSessionHostLocalTime": null,
                    "maintenanceWindowTimeZone": "India Standard Time",
                    "maintenanceWindows": [
                        {
                            "hour": 16,
                            "dayOfWeek": "Saturday"
                        },
                        {
                            "hour": 16,
                            "dayOfWeek": "Sunday"
                        }
                    ]
                },
                "friendlyName": null,
                "description": "Created through the Azure Virtual Desktop extension",
                "hostPoolType": "Personal",
                "personalDesktopAssignmentType": "Direct",
                "applicationGroupReferences": [
                    "@{variables('applicationGroupReferences')}"
                ],
                "customRdpProperty": "audiomode:i:0;videoplaybackmode:i:1;redirectclipboard:i:0;redirectprinters:i:0;devicestoredirect:s:*;redirectcomports:i:1;redirectsmartcards:i:0;usbdevicestoredirect:s:;enablecredsspsupport:i:1;redirectwebauthn:i:0;use multimon:i:1;enablerdsaadauth:i:1;autoreconnection enabled:i:0;bandwidthautodetect:i:1;networkautodetect:i:1;compression:i:0;audiocapturemode:i:1;encode redirected video capture:i:1;redirected video capture encoding quality:i:1;camerastoredirect:s:;redirectlocation:i:0;keyboardhook:i:2;selectedmonitors:s:;maximizetocurrentdisplays:i:0;singlemoninwindowedmode:i:1;screen mode id:i:2;smart sizing:i:1;dynamic resolution:i:1;drivestoredirect:s:;targetisaadjoined:i:1;",
                "maxSessionLimit": 999999,
                "loadBalancerType": "Persistent",
                "validationEnvironment": false,
                "ring": null,
                "registrationInfo": null,
                "vmTemplate": "{\"domain\":\"\",\"galleryImageOffer\":null,\"galleryImagePublisher\":null,\"galleryImageSKU\":null,\"imageType\":\"CustomImage\",\"customImageId\":\"@{variables('VMImage')}\",\"namePrefix\":\"vCME-AEU-P\",\"osDiskType\":\"StandardSSD_LRS\",\"vmSize\":{\"id\":\"Standard_DC4ads_v5\",\"cores\":4,\"ram\":16,\"rdmaEnabled\":false,\"supportsMemoryPreservingMaintenance\":true},\"galleryItemId\":null,\"hibernate\":false,\"diskSizeGB\":0,\"securityType\":\"ConfidentialVM\",\"secureBoot\":true,\"vTPM\":true,\"vmInfrastructureType\":\"Cloud\",\"virtualProcessorCount\":null,\"memoryGB\":null,\"maximumMemoryGB\":null,\"minimumMemoryGB\":null,\"dynamicMemoryConfig\":false}",
                "preferredAppGroupType": "Desktop",
                "migrationRequest": null,
                "cloudPcResource": false,
                "startVMOnConnect": true,
                "ssoadfsAuthority": null,
                "ssoClientId": null,
                "ssoClientSecretKeyVaultPath": null,
                "ssoSecretType": null,
                "objectId": "fd0faae5-77bf-4f88-823e-5f0c6cd20aee"
            }
        },
        "hostpoolResourceGroup": {
            "value": "Alpha"
        },
        "hostpoolLocation": {
            "value": "eastus"
        },
        "hostpoolToken": {
            "value": '@{variables('HostPoolRegToken')}'
        },
        "vmInitialNumber": {
            "value": @{variables('VMNumber')}
        },
        "vmResourceGroup": {
            "value": "Alpha"
        },
        "vmLocation": {
            "value": "eastus"
        },
        "vmNamePrefix": {
            "value": "vCME-AEU-P"
        },
        "vmNumberOfInstances": {
            "value": 1
        },
        "vmSize": {
            "value": "Standard_DC4as_v5"
        },
        "vmDiskType": {
            "value": "StandardSSD_LRS"
        },
        "vmDiskSizeGB": {
            "value": 0
        },
        "vmHibernate": {
            "value": false
        },
        "availabilityOption": {
            "value": "None"
        },
        "availabilitySetName": {
            "value": ""
        },
        "createAvailabilitySet": {
            "value": false
        },
        "availabilitySetUpdateDomainCount": {
            "value": 5
        },
        "availabilitySetFaultDomainCount": {
            "value": 2
        },
        "availabilityZones": {
            "value": []
        },
        "securityType": {
            "value": "ConfidentialVM"
        },
        "secureBoot": {
            "value": true
        },
        "vTPM": {
            "value": true
        },
        "managedDiskSecurityEncryptionType": {
            "value": "DiskWithVMGuestState"
        },
        "integrityMonitoring": {
            "value": true
        },
        "vmImageType": {
            "value": "CustomImage"
        },
        "bootDiagnostics": {
            "value": {
                "enabled": true
            }
        },
        "customConfigurationScriptUrl": {
            "value": ""
        },
        "virtualNetworkResourceGroupName": {
            "value": "Alpha"
        },
        "existingVnetName": {
            "value": "Alpha"
        },
        "existingSubnetName": {
            "value": "default"
        },
        "createNetworkSecurityGroup": {
            "value": false
        },
        "aadJoin": {
            "value": true
        },
        "intune": {
            "value": true
        },
        "domain": {
            "value": ""
        },
        "ouPath": {
            "value": ""
        },
        "vmAdministratorAccountUsername": {
            "value": "@{variables('AdminUser')}"
        },
        "vmAdministratorAccountPassword": {
            "value": "@{variables('AdminSecret')}"  
  },
        "networkInterfaceTags": {
            "value": {
                "cm-resource-parent": "/subscriptions/e515979b-346a-42bd-9a9b-60518d52cc82/resourcegroups/Alpha/providers/Microsoft.DesktopVirtualization/hostpools/AlphapilotTest"
            }
        },
        "networkSecurityGroupTags": {
            "value": {
                "cm-resource-parent": "/subscriptions/e515979b-346a-42bd-9a9b-60518d52cc82/resourcegroups/Alpha/providers/Microsoft.DesktopVirtualization/hostpools/AlphapilotTest"
            }
        },
        "availabilitySetTags": {
            "value": {
                "cm-resource-parent": "/subscriptions/e515979b-346a-42bd-9a9b-60518d52cc82/resourcegroups/Alpha/providers/Microsoft.DesktopVirtualization/hostpools/AlphapilotTest"
            }
        },
        "virtualMachineTags": {
            "value": {
                 "username": "@{variables('username')}",
                "machine_tag": "@{variables('machine_tag')}",
                "org_tag": "@{variables('org_tag')}",
                "legal_hold": "@{variables('legal_hold')}",
               "BusL2FuncCode": "@{variables('BusL2FuncCode')}",
        "BusL2FuncName": "@{variables('BusL2FuncName')}",
        "BusL3FuncCode": "@{variables('BusL3FuncCode')}",
        "BusL3FuncName": "@{variables('BusL3FuncName')}",
        "BusL4FuncCode": "@{variables('BusL4FuncCode')}",
        "BusL4FuncName": "@{variables('BusL4FuncName')}",
        "BusL5FuncCode": "@{variables('BusL5FuncCode')}",
        "BusL5FuncName": "@{variables('BusL5FuncName')}",
        "BusL6FuncCode": "@{variables('BusL6FuncCode')}",
        "BusL6FuncName": "@{variables('BusL6FuncName')}",
        "BusL7FuncCode": "@{variables('BusL7FuncCode')}",
        "BusL7FuncName": "@{variables('BusL7FuncName')}",
        "BusL8FuncCode": "@{variables('BusL8FuncCode')}",
        "BusL8FuncName": "@{variables('BusL8FuncName')}",
        "BusL9FuncCode": "@{variables('BusL9FuncCode')}",
        "BusL9FuncName": "@{variables('BusL9FuncName')}",
        "BusL10FuncCode": "@{variables('BusL10FuncCode')}",
        "BusL10FuncName": "@{variables('BusL10FuncName')}",
        "BusL11FuncCode": "@{variables('BusL11FuncCode')}",
        "BusL11FuncName": "@{variables('BusL11FuncName')}",
               "cost_center": "@{variables('cost_center')}",
                "cm-resource-parent": "@{variables('applicationGroupReferencesTags')}"
            }
        },
        "deploymentId": {
            "value": "fb7fc05c-3482-46cb-8bbe-2afc@{variables('contant')}915d"
        },
        "apiVersion": {
            "value": "2022-10-14-preview"
        },
        "vmCustomImageSourceId": {
            "value": "@{variables('VMImage')}"
        },
        "systemData": {
            "value": {
                "aadJoinPreview": false,
                "sessionHostConfigurationVersion": "",
                "firstPartyExtension": false
            }
        }
    }
}